use std::io::{BufReader, Read};

pub mod blockchain;
pub mod dir_iterator;
pub mod file;
pub mod filesystem;
pub mod internet;

// extern "C" {
//     fn print(s: u32);
// }

#[no_mangle]
pub unsafe extern "C" fn run() -> u32 {
    let internet = internet::Internet::new("example.com", true).unwrap();
    let mut reader = BufReader::with_capacity(16 * 1024, internet);
    // let identifier = 123456789i64;
    let mut buf = Vec::new();
    // buf.resize(20 * 1048576, 0);
    let res = reader.read_to_end(&mut buf).unwrap();
    // print(res as u32);
    if res == 0 {
        return 0;
    }
    let expected = "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";
    let actual = std::str::from_utf8_unchecked(&buf[0..res as usize]);
    assert_eq!(actual, expected);
    return 1;
}
